import * as React from 'react';
import Styles from './Events.module.scss';
import { EventsItem, fetchNewsData } from './eventsServices';


const Events: React.FC = () => {
 

  const [news, setNews] = React.useState<EventsItem[]>([]);
  const [currentIndex, setCurrentIndex] = React.useState(0);

  // Fetch data on component mount
  React.useEffect(() => {
    async function fetchNews() {
      try {
        const data = await fetchNewsData();
        setNews(data);
      } catch (error) {
        console.error('Error fetching news:', error);
      }
    }
    fetchNews();
  }, []);

  const handleNext = () => {
    setCurrentIndex((prevIndex) => (prevIndex + 1) % news.length);
  };

  const handlePrev = () => {
    setCurrentIndex((prevIndex) => (prevIndex - 1 + news.length) % news.length);
  };

  if (news.length === 0) {
    return <div>Loading...</div>;
  }


  const currentEvents = news[currentIndex];

  

  return (
    <div className={Styles.Latest_News_holder}>
        <div className={Styles.logo_holder}>
                <div className={Styles.logo_holder_img}>
                  <svg width="31" height="25" viewBox="0 0 31 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_1_479)">
                  <path d="M0 2.28367C0.0239435 2.23395 0.054728 2.18091 0.075251 2.13119C0.290743 1.60414 0.790136 1.27598 1.34084 1.29587C1.91206 1.31576 2.38409 1.67707 2.56196 2.23063C2.5859 2.30356 2.60984 2.3798 2.64405 2.48587C2.7535 2.44941 2.8527 2.41957 2.95189 2.38311C7.25488 0.705837 11.7255 -0.109596 16.3637 0.00973543C17.5301 0.0395684 18.6965 0.182104 19.8594 0.284861C20.2323 0.318009 20.4238 0.52021 20.3759 0.795336C20.3315 1.07378 20.0989 1.20637 19.726 1.15333C18.1047 0.934556 16.4731 0.841743 14.8347 0.88152C10.7267 0.980963 6.77601 1.79308 2.98268 3.32451C2.94505 3.33776 2.91085 3.35765 2.84928 3.38417C3.49233 5.96638 4.13539 8.54527 4.78186 11.1407C11.9273 8.61819 19.059 8.61488 26.2113 11.1407C26.8544 8.55521 27.4974 5.97632 28.1541 3.34771C27.3024 3.04938 26.4747 2.71459 25.6161 2.4693C24.3334 2.10467 23.0302 1.79971 21.7339 1.47486C21.385 1.38868 21.2105 1.20305 21.2618 0.944501C21.3166 0.66606 21.5628 0.546728 21.922 0.616338C24.0324 1.02406 26.0882 1.61077 28.0823 2.39969C28.1644 2.43283 28.2499 2.45272 28.3491 2.48587C28.3833 2.38974 28.4107 2.30687 28.438 2.22732C28.657 1.54779 29.3342 1.17322 30.0217 1.34559C30.7127 1.51796 31.1266 2.16765 30.9555 2.86375C30.1757 6.0161 29.3889 9.16845 28.6022 12.3175C28.4278 13.0202 28.2533 13.7229 28.0823 14.4257C28.0276 14.6444 27.9044 14.8301 27.665 14.8234C27.5179 14.8201 27.3264 14.724 27.2443 14.6113C27.169 14.5052 27.1759 14.3097 27.2101 14.1671C27.4666 13.1031 27.7368 12.039 28.0002 10.9783C28.6775 8.26351 29.3547 5.54872 30.0286 2.83392C30.1209 2.45935 30.0354 2.25384 29.772 2.19417C29.5258 2.13782 29.3513 2.2903 29.2624 2.64829C28.3457 6.32106 27.4324 9.99382 26.5157 13.6699C25.7016 16.935 24.891 20.2 24.0769 23.4651C24.0666 23.5115 24.0461 23.5579 24.0393 23.6076C23.9914 23.8728 24.1009 24.065 24.3266 24.1147C24.5421 24.1645 24.7473 24.0286 24.8123 23.78C24.9389 23.296 25.0552 22.812 25.1783 22.3281C25.688 20.2762 26.1942 18.2277 26.7107 16.1759C26.7415 16.0466 26.7962 15.9074 26.8851 15.8112C27.0254 15.6555 27.2169 15.6322 27.4085 15.7383C27.6069 15.8477 27.6787 16.0234 27.6274 16.2355C27.4427 16.9847 27.258 17.7371 27.0698 18.4863C26.6183 20.2994 26.1668 22.1126 25.7187 23.9258C25.5853 24.4661 25.2638 24.8374 24.696 24.9666C24.2035 25.0793 23.7759 24.9335 23.4373 24.5722C23.1123 24.2241 23.0576 23.8131 23.1671 23.3656C24.094 19.6531 25.0175 15.9438 25.9411 12.2313C25.9548 12.1749 25.965 12.1186 25.989 12.0092C18.994 9.50987 12.0196 9.51318 5.00419 12.0092C5.16496 12.6622 5.31888 13.2854 5.4728 13.9086C6.2561 17.0609 7.04281 20.2099 7.82611 23.3623C8.01765 24.1313 7.62088 24.791 6.86837 24.9666C6.17058 25.1291 5.48648 24.7081 5.29836 23.9755C4.9221 22.5071 4.55953 21.0353 4.19353 19.5636C4.11486 19.252 4.24142 19.0166 4.49796 18.9536C4.77844 18.8874 4.99735 19.0365 5.07944 19.3647C5.44544 20.8166 5.80459 22.2684 6.16716 23.7203C6.24926 24.0418 6.47843 24.1943 6.72471 24.0849C6.99492 23.9656 6.98808 23.7468 6.92651 23.5115C6.65972 22.4474 6.39292 21.3867 6.12954 20.3227C4.67583 14.4555 3.21527 8.58836 1.75472 2.72453C1.73419 2.64829 1.72051 2.57205 1.69657 2.49581C1.62474 2.27041 1.47082 2.14445 1.22112 2.19085C0.991945 2.23395 0.872228 2.44278 0.933797 2.69138C1.09114 3.33777 1.2519 3.98415 1.41267 4.62721C2.47302 8.87012 3.52996 13.113 4.59031 17.3559C4.61426 17.4521 4.64846 17.5482 4.64504 17.6443C4.6382 17.873 4.52532 18.0421 4.27905 18.0819C4.00883 18.125 3.8207 18.0123 3.75571 17.7537C3.56758 17.0344 3.38972 16.3118 3.21185 15.5925C2.16176 11.3827 1.11166 7.17958 0.0649895 2.97314C0.047887 2.9201 0.020523 2.86707 0 2.81403C0 2.63835 0 2.46267 0 2.28698V2.28367Z" fill="#00966C"/>
                  <path d="M18.994 4.8628C18.9222 5.45283 18.847 6.03955 18.7751 6.62958C18.7478 6.86161 18.7307 7.09696 18.6896 7.32899C18.6383 7.62069 18.4297 7.7798 18.1663 7.74334C17.9166 7.70688 17.7627 7.51462 17.7935 7.22623C17.92 6.10916 18.0603 4.99539 18.1936 3.87832C18.2244 3.62639 18.2621 3.37447 18.286 3.12255C18.3099 2.86068 18.3715 2.62865 18.6862 2.57893C18.9975 2.5292 19.1377 2.72146 19.2403 2.96675C19.5892 3.78882 19.9415 4.60757 20.2938 5.42963C20.3383 5.53239 20.3896 5.63514 20.4991 5.73459C20.5504 5.3335 20.6017 4.93241 20.653 4.52801C20.7077 4.10041 20.7488 3.6728 20.8172 3.24851C20.8651 2.94687 21.1079 2.7977 21.385 2.87726C21.6518 2.95349 21.7339 3.14907 21.7031 3.4043C21.5868 4.37553 21.4671 5.34344 21.3508 6.31467C21.2995 6.73233 21.2447 7.14999 21.2003 7.56766C21.1729 7.80632 21.0703 7.98863 20.8172 8.03172C20.547 8.07813 20.3828 7.93228 20.2836 7.69693C19.9107 6.82183 19.5311 5.95005 19.1582 5.07495C19.1274 5.00534 19.0967 4.93241 19.0659 4.8628C19.0419 4.8628 19.0214 4.8628 18.9975 4.8628H18.994Z" fill="#00966C"/>
                  <path d="M15.1152 3.33793V4.62738C15.5359 4.62738 15.9361 4.62738 16.3397 4.62738C16.692 4.62738 16.8973 4.79643 16.8939 5.06824C16.8904 5.34005 16.6852 5.50579 16.3295 5.50911C15.9293 5.51242 15.5291 5.50911 15.0947 5.50911V6.79855C15.5291 6.79855 15.9293 6.79855 16.3261 6.79855C16.6852 6.79855 16.887 6.95766 16.8904 7.22947C16.8904 7.5046 16.6886 7.67365 16.3363 7.67697C15.8027 7.68028 15.2657 7.6836 14.7321 7.67697C14.3627 7.67365 14.1882 7.51454 14.1848 7.15655C14.178 5.75771 14.178 4.35888 14.1848 2.96005C14.1848 2.61531 14.3558 2.45952 14.7116 2.45952C15.2657 2.4562 15.8232 2.4562 16.3774 2.45952C16.6886 2.45952 16.8836 2.62526 16.8904 2.88049C16.9007 3.14567 16.6989 3.3313 16.3774 3.33793C15.9635 3.34456 15.553 3.33793 15.1118 3.33793H15.1152Z" fill="#00966C"/>
                  <path d="M11.8625 6.72903C11.9719 5.86388 12.0711 5.08159 12.1703 4.29599C12.2285 3.83192 12.2832 3.36454 12.3482 2.90047C12.3892 2.61209 12.6047 2.44304 12.8613 2.48281C13.1212 2.52259 13.282 2.73805 13.2478 3.02312C13.0768 4.39212 12.9057 5.75781 12.7279 7.12349C12.6731 7.54447 12.4063 7.81296 12.0301 7.85937C11.6333 7.90909 11.3255 7.74004 11.1408 7.34558C10.5627 6.10917 9.98805 4.87276 9.41341 3.63635C9.26974 3.32808 9.345 3.07616 9.60153 2.96345C9.86149 2.85075 10.0941 2.96014 10.2446 3.27836C10.7269 4.30925 11.2057 5.34346 11.688 6.37435C11.7325 6.47048 11.7804 6.55998 11.8659 6.72903H11.8625Z" fill="#00966C"/>
                  <path d="M6.84098 4.57107C6.95727 5.00199 7.05989 5.38651 7.17277 5.80748C7.52166 5.72461 7.85687 5.64175 8.19207 5.55888C8.28101 5.53899 8.36652 5.51247 8.45545 5.4959C8.73593 5.44286 8.96169 5.56882 9.01984 5.80417C9.08141 6.04946 8.95485 6.26161 8.67779 6.33785C8.27417 6.45386 7.86371 6.54999 7.40878 6.66932C7.51482 7.07373 7.61743 7.4715 7.73031 7.90573C8.14761 7.80298 8.54097 7.70685 8.93774 7.61072C9.27979 7.52785 9.51581 7.63724 9.5808 7.90573C9.64579 8.1676 9.50897 8.36649 9.17718 8.45267C8.65384 8.59189 8.12708 8.7278 7.60033 8.85044C7.23775 8.93663 7.04621 8.82393 6.95043 8.47256C6.58444 7.12345 6.22187 5.77434 5.86613 4.42191C5.7772 4.08712 5.8935 3.89486 6.23213 3.80536C6.75546 3.66614 7.28222 3.53355 7.80898 3.40427C8.14761 3.32141 8.39388 3.44074 8.46229 3.70592C8.5307 3.96116 8.3631 4.17662 8.02447 4.26612C7.63795 4.36887 7.25144 4.46169 6.83756 4.56776L6.84098 4.57107Z" fill="#00966C"/>
                  <path d="M23.6016 4.30583C23.2767 4.2329 22.9825 4.17324 22.6917 4.10031C22.401 4.02739 22.2437 3.8053 22.3052 3.56332C22.3702 3.31471 22.6028 3.17549 22.8936 3.23847C23.7966 3.43736 24.6996 3.63956 25.5992 3.84839C25.9241 3.92463 26.0678 4.14009 25.9959 4.39864C25.9275 4.64725 25.7155 4.75995 25.4008 4.70029C25.1066 4.64393 24.8125 4.57764 24.4978 4.50803C24.2823 5.40965 24.0736 6.29138 23.8616 7.1731C23.7829 7.50458 23.7042 7.83937 23.6221 8.17085C23.5366 8.52553 23.328 8.68464 23.0406 8.62166C22.7636 8.56199 22.6541 8.32002 22.7396 7.96202C23.003 6.84826 23.2698 5.73781 23.5332 4.62405C23.5571 4.53123 23.5708 4.4351 23.5982 4.30583H23.6016Z" fill="#00966C"/>
                  </g>
                  <defs>
                  <clipPath id="clip0_1_479">
                  <rect width="31" height="25" fill="white"/>
                  </clipPath>
                  </defs>
                  </svg>

                </div>
                <div className={Styles.text}>
                    <p>Ev√©nements</p>
                </div>
        </div>
        <div className={Styles.content_holder}>
          <div className={Styles.img_background}>
            <img src={currentEvents.ImgUrl} alt="" />
          </div>
          <div className={Styles.baneer_holder}>
            <div className={Styles.banner}>
              <div className={Styles.content}>
                <div className={Styles.title}>
                  <p>Event:</p>
                </div>
                <div className={Styles.text_content}>
                  <p>{currentEvents.EventsDesc}</p>
                </div>
              </div>
              <div className={Styles.nav_btns}>
                    <div className={Styles.contreolers_holder}>
                        <button className={Styles.btn_left} onClick={handlePrev}>
                            <svg width="14" height="24" viewBox="0 0 14 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12.4585 1.81079L0.999962 12.3198L12.4585 22.8287" stroke="#00966C" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>

                        </button>
                        <button className={Styles.btn_right} onClick={handleNext}>
                            <svg width="14" height="24" viewBox="0 0 14 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1 1.81079L12.4585 12.3198L1 22.8287" stroke="#00966C" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>

                        </button>
                    </div>
              </div>
            </div>
          </div>
        </div>
        
        
    </div>
  );
};

export default Events;
